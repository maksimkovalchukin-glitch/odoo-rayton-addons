<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="sale_order_form_inherit_rayton_kp" model="ir.ui.view">
        <field name="name">sale.order.form.inherit.rayton.kp</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">

            <!-- ‚ïê‚ïê Status ribbons on main form ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <xpath expr="//field[@name='partner_id']" position="before">
                <field name="kp_state" invisible="1"/>
                <widget name="web_ribbon"
                        title="–ö–ü —Ñ–æ—Ä–º—É—î—Ç—å—Å—è..."
                        bg_color="bg-warning"
                        invisible="kp_state != 'pending'"/>
                <widget name="web_ribbon"
                        title="‚úÖ –ö–ü –≥–æ—Ç–æ–≤–∞"
                        bg_color="bg-success"
                        invisible="kp_state != 'done'"/>
            </xpath>

            <!-- ‚ïê‚ïê –ö–ü Generator tab ‚Äî FIRST (before order_lines) ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <xpath expr="//page[@name='order_lines']" position="before">
                <page string="üßæ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ö–ü" name="kp_generator">

                    <!-- ‚îÄ‚îÄ –¢–∏–ø –ö–ü ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
                    <group string="–¢–∏–ø –∫–æ–º–µ—Ä—Ü—ñ–π–Ω–æ—ó –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó">
                        <field name="kp_type" widget="radio"
                               options="{'horizontal': true}"/>
                    </group>

                    <!-- ‚îÄ‚îÄ –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
                    <group string="–ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è" col="2">
                        <field name="kp_project_name"
                               placeholder="–¢–û–í –°–ê–ù–¢–ï–ö–û –ì–†–£–ü"/>
                        <field name="kp_manager_id"/>
                        <field name="kp_region"/>
                        <field name="kp_currency"/>
                    </group>

                    <!-- ‚îÄ‚îÄ –°–ï–°: —Ä–µ–∂–∏–º —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
                    <group string="–†–µ–∂–∏–º —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –°–ï–°"
                           invisible="kp_type != 'ses'">
                        <field name="kp_ses_mode" widget="radio"/>
                    </group>

                    <!-- ‚îÄ‚îÄ –°–ï–°: –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
                    <group string="–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –°–ï–°" col="2"
                           invisible="kp_type != 'ses'">
                        <field name="kp_module_type"/>
                        <field name="kp_mount_type"/>
                        <field name="kp_material_type"/>
                        <field name="kp_ses_type"/>
                        <field name="kp_power_reg"/>
                        <field name="kp_monitoring"/>
                        <field name="kp_price_vat_type"/>
                        <field name="kp_price_per_kw" placeholder="–ù–∞–ø—Ä. 850"/>
                    </group>

                    <!-- ‚îÄ‚îÄ Consumption ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
                    <group string="üìä –°–ø–æ–∂–∏–≤–∞–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞"
                           invisible="kp_type != 'ses' or kp_ses_mode != 'consumption'">
                        <field name="kp_monthly_consumption"
                               placeholder="–ú—ñ–Ω—ñ–º—É–º 10 –ú–í—Ç¬∑–≥–æ–¥"/>
                    </group>

                    <!-- ‚îÄ‚îÄ Power ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
                    <group string="‚ö° –ü–ª–∞–Ω–æ–≤–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å"
                           invisible="kp_type != 'ses' or kp_ses_mode != 'power'">
                        <field name="kp_planned_dc_power"
                               placeholder="–ù–∞–ø—Ä. 500"/>
                    </group>

                    <!-- ‚îÄ‚îÄ Roof ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
                    <group string="üè† –ü–ª–æ—â–∞ –¥–∞—Ö—É" col="2"
                           invisible="kp_type != 'ses' or kp_ses_mode != 'roof'">
                        <field name="kp_roof_area" placeholder="–ù–∞–ø—Ä. 2000"/>
                        <field name="kp_roof_mount_type"/>
                    </group>

                    <!-- ‚îÄ‚îÄ Manual: –ø–∞–Ω–µ–ª—ñ –ø–µ—Ä—à–∏–º–∏ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
                    <group string="üîÜ –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–∞–Ω–µ–ª–µ–π"
                           invisible="kp_type != 'ses' or kp_ses_mode != 'manual'">
                        <field name="kp_panel_qty" string="–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–∞–Ω–µ–ª–µ–π"/>
                        <field name="kp_manual_dc_info"
                               nolabel="1" readonly="1"
                               style="color:#0d6efd; font-weight:600; font-size:13px;
                                      padding:4px 8px;"/>
                    </group>

                    <!-- ‚îÄ‚îÄ Manual: —ñ–Ω–≤–µ—Ä—Ç–æ—Ä–∏ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
                    <group string="‚úçÔ∏è –ü—ñ–¥–±—ñ—Ä —ñ–Ω–≤–µ—Ä—Ç–æ—Ä—ñ–≤"
                           invisible="kp_type != 'ses' or kp_ses_mode != 'manual'">
                        <group col="2" string="–Ü–Ω–≤–µ—Ä—Ç–æ—Ä 1">
                            <field name="kp_inv1_model" string="–ú–æ–¥–µ–ª—å"/>
                            <field name="kp_inv1_qty"   string="–ö—ñ–ª—å–∫—ñ—Å—Ç—å"/>
                        </group>
                        <group col="2" string="–Ü–Ω–≤–µ—Ä—Ç–æ—Ä 2">
                            <field name="kp_inv2_model" string="–ú–æ–¥–µ–ª—å"/>
                            <field name="kp_inv2_qty"   string="–ö—ñ–ª—å–∫—ñ—Å—Ç—å"/>
                        </group>
                        <group col="2" string="–Ü–Ω–≤–µ—Ä—Ç–æ—Ä 3">
                            <field name="kp_inv3_model" string="–ú–æ–¥–µ–ª—å"/>
                            <field name="kp_inv3_qty"   string="–ö—ñ–ª—å–∫—ñ—Å—Ç—å"/>
                        </group>
                    </group>

                    <!-- ‚îÄ‚îÄ DC/AC –ø—ñ–¥—Å—É–º–æ–∫ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
                    <group invisible="kp_type != 'ses' or kp_ses_mode != 'manual'">
                        <field name="kp_manual_ratio_info"
                               nolabel="1" readonly="1"
                               style="font-weight:600; font-size:13px;
                                      background:#f0f4ff; padding:8px 12px;
                                      border-radius:6px; border:1px solid #c8d4f0;"/>
                    </group>

                    <!-- ‚îÄ‚îÄ –£–ó–ï ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
                    <group string="üîã –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –£–ó–ï" col="2"
                           invisible="kp_type != 'uze'">
                        <field name="kp_uze_model"/>
                        <field name="kp_uze_qty"/>
                        <field name="kp_uze_vat"       string="–í–∞—Ä—Ç—ñ—Å—Ç—å –£–ó–ï"/>
                        <field name="kp_equipment_vat" string="–û–±–ª–∞–¥–Ω–∞–Ω–Ω—è —Ç–∞ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏"/>
                        <field name="kp_usage_type"/>
                        <field name="kp_delivery_term"/>
                        <field name="kp_payment_terms" string="–£–º–æ–≤–∏ –æ–ø–ª–∞—Ç–∏"/>
                        <field name="kp_delivery_terms"/>
                    </group>

                    <!-- ‚îÄ‚îÄ –ö–Ω–æ–ø–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó + —Å—Ç–∞—Ç—É—Å ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
                    <div class="d-flex align-items-center gap-3 mt-3 ms-2">
                        <button name="action_generate_kp"
                                type="object"
                                string="üöÄ –°—Ñ–æ—Ä–º—É–≤–∞—Ç–∏ –ö–ü"
                                class="btn btn-primary"
                                invisible="kp_state == 'pending'"/>
                        <span class="badge text-bg-warning fs-6"
                              invisible="kp_state != 'pending'">
                            ‚è≥ –ö–ü —Ñ–æ—Ä–º—É—î—Ç—å—Å—è...
                        </span>
                        <span class="badge text-bg-success fs-6"
                              invisible="kp_state != 'done'">
                            ‚úÖ –ö–ü –≥–æ—Ç–æ–≤–∞
                        </span>
                    </div>

                </page>
            </xpath>

        </field>
    </record>

</odoo>
